<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Overwatchle</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>  
  
  <style>
    @font-face {
		font-family: BigNoodleOblique;
		src: url("BignoodletitlingOblique-BxY5.ttf") format("truetype");
	}
	
    body {
		font-family: BigNoodleOblique;
		font-size: 1.25em;
		background-color: #1a1a1a;
		text-align: center;
		padding: 20px;
		position: relative;
		
    }
	
	body::before{
		content: "";
		background: linear-gradient(to bottom, rgba(26, 26, 26, 0), #1a1a1a), url("overwatch.jpg");
		background-size: cover;
		background-repeat: no-repeat;
		opacity: 0.5;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: -1; 
	}
	
	h1{
		font-weight:normal;
	}
	
	.gameContainer{
		background-color: #43484c;
		color: white;
		padding-top: 20px;
		padding-bottom: 10px;
		width: 700px;
		border: 2px solid #f99e1a;
		border-radius: 10px;
		justify-self:center;
		align-self: center;
	}

	.howToPlay{
		justify-self:left;
	}
	
    .hint {
		margin: 10px 0;
		font-size: 18px;
    }
    .input-container {
		margin-top: 20px;
		padding-bottom: 10px;
    }
    input {
		padding: 10px;
		font-size: 20px;
		width: 300px;
		font-family: BigNoodleOblique;
		border-radius: 10px;
    }
	
	input[type=text]:focus{
		outline: none;
	}
	
	.testing{
		border:2px solid black;
	}
    button {
		padding: 10px 15px;
		font-size: 20px;
		cursor: pointer;
		font-family: BigNoodleOblique;
		border: 2px solid white;
		border-radius: 10px;
		background-color: #f99e1a;
    }
    .result {
		margin-top: 20px;
		font-size: 20px;
    }
    .feedback {
		margin-top: 10px;
	}
	
    .guess-history {
		margin-top: 20px;
		text-align: center;
	  
    }
    .guess-entry {
		display: flex;
		align-items: center;
		padding: 10px;
		margin-top: 5px;
		background-color: #43484c;
		color: white;
		border: 1px solid white;
		border-radius: 10px;
		justify-self: center;
		justify-content:center;
		width: 825px;
		font-size: 25px;
		text-align: center;
    }
	
	.guess-image {
		width: 60px;
		height: 60px;
		margin-right: 10px;
		border-radius: 5px;
		padding:1px;
		border: 1px solid #f99e1a;
	}
	
	.modal-content{
		background-color:#43484c;
		color:white;
		border:1px solid #f99e1a;	
		width:820px;
	}

	.modal{
		text-align:center;
		transform:translate(-160px);
	}

	
	.modal-body{
		padding-bottom:5px;
		font-size: 25px;
	}

	.modal-header{
		border:none;
		padding-bottom:5px;
	}
	
  </style>
</head>
<body>
	
	

  <div class="gameContainer">  
  <h1>Overwatchle</h1>
  <p>Guess the Overwatch hero based on matching traits!</p>

  <div class="input-container">
    <input type="text" id="guess" class="testing" placeholder="Enter your hero guess here" onkeydown="handleKeyDown(event)">
    <button onclick="checkGuess()">Submit</button>
    <button onclick="playAgain()">Play Again</button>
	<button type="button" data-bs-toggle="modal" data-bs-target="#showInstructions">How To Play</button>
  </div>
  </div>
  <div id="guess-history" class="guess-history"></div>

  <div class="modal" id="showInstructions">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h2 class="modal-title">Welcome to Overwatchle</h2>
				<button type="btn" class="btn-close btn-close-white" data-bs-dismiss="modal" ></button>
			</div>

			<div class="modal-body">
				
				<p>This game is heavily inspired by Loldle.net, a game in which
					you guess the hidden character based on shared traits. In
					Overwatchle, the traits are the species (human, omnic, cyborg, animal, and other),
					gender (male, female, other), role (DPS, support, tank), playstyle (dive, poke brawl),
					and release year.
				</p>

			</div>
			
		</div>
	</div>
  </div>

  <script>
    // Hero data
    const heroes = [
		{ name: "Ana", role: "Support", species: "Human", gender: "Female", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Ana.png"},
		{ name: "Ashe", role: "DPS", species: "Human", gender: "Female", compPlaystyle: "Poke", releaseYear: 2018, img: "images/Ashe.png" },
		{ name: "Baptiste", role: "Support", species: "Human", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2019, img: "images/Baptiste.png" },
		{ name: "Bastion", role: "DPS", species: "Omnic", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Bastion.png" },
		{ name: "Brigitte", role: "Support", species: "Human", gender: "Female", compPlaystyle: "Dive", releaseYear: 2018, img: "images/Brigitte.png" },
		{ name: "Cassidy", role: "DPS", species: "Human", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Cassidy.png" },
		{ name: "D.Va", role: "Tank", species: "Human", gender: "Female", compPlaystyle: "Dive", releaseYear: 2016, img: "images/DVa.png" },
		{ name: "Doomfist", role: "Tank", species: "Cyborg", gender: "Male", compPlaystyle: "Dive", releaseYear: 2017, img: "images/Doomfist.png" },
		{ name: "Echo", role: "DPS", species: "Omnic", gender: "Female", compPlaystyle: "Dive", releaseYear: 2020, img: "images/Echo.png" },
		{ name: "Genji", role: "DPS", species: "Cyborg", gender: "Male", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Genji.png" },
		{ name: "Hanzo", role: "DPS", species: "Human", gender: "Male", compPlaystyle: "Poke", releaseYear: 2016, img: "images/Hanzo.png" },
		{ name: "Hazard", role: "Tank", species: "Cyborg", gender: "Male", compPlaystyle: "Dive", releaseYear: 2024, img: "images/Hazard.png"},
		{ name: "Illari", role: "Support", species: "Human", gender: "Female", compPlaystyle: "Poke", releaseYear: 2023, img: "images/Illari.png" },
		{ name: "Junker Queen", role: "Tank", species: "Human", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2022, img: "images/Junker_Queen.png" },
		{ name: "Junkrat", role: "DPS", species: "Human", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Junkrat.png" },
		{ name: "Juno", role: "Support", species: "Human", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2024, img:"images/Juno.png" },
		{ name: "Kiriko", role: "Support", species: "Human", gender: "Female", compPlaystyle: "Dive", releaseYear: 2022, img:"images/Kiriko.png" },
		{ name: "Lifeweaver", role: "Support", species: "Human", gender: "Male", compPlaystyle: "Poke", releaseYear: 2023, img:"images/Lifeweaver.png" },
		{ name: "Lucio", role: "Support", species: "Human", gender: "Male", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Lucio.png" },
		{ name: "Mauga", role: "Tank", species: "Cyborg", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2023, img:"images/Mauga.png" },
		{ name: "Mei", role: "DPS", species: "Human", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Mei.png" },
		{ name: "Mercy", role: "Support", species: "Human", gender: "Female", compPlaystyle: "Poke", releaseYear: 2016, img: "images/Mercy.png" },
		{ name: "Moira", role: "Support", species: "Other", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2017, img: "images/Moira.png" },
		{ name: "Orisa", role: "Tank", species: "Omnic", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2017, img: "images/Orisa.png" },
		{ name: "Pharah", role: "DPS", species: "Human", gender: "Female", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Pharah.png" },
		{ name: "Ramattra", role: "Tank", species: "Omnic", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2022, img: "images/Ramattra.png" },
		{ name: "Reaper", role: "DPS", species: "Other", gender: "Male", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Reaper.png" },
		{ name: "Reinhardt", role: "Tank", species: "Human", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Reinhardt.png" },
		{ name: "Roadhog", role: "Tank", species: "Human", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Roadhog.png" },
		{ name: "Sigma", role: "Tank", species: "Cyborg", gender: "Male", compPlaystyle: "Poke", releaseYear: 2019, img: "images/Sigma.png" },
		{ name: "Sojourn", role: "DPS", species: "Cyborg", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2022, img: "images/Sojourn.png" },
		{ name: "Soldier: 76", role: "DPS", species: "Cyborg", gender: "Male", compPlaystyle: "Poke", releaseYear: 2016, img: "images/Soldier76.png" },
		{ name: "Sombra", role: "DPS", species: "Human", gender: "Female", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Sombra.png" },
		{ name: "Symmetra", role: "DPS", species: "Cyborg", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Symmetra.png" },
		{ name: "Torbjorn", role: "DPS", species: "Cyborg", gender: "Male", compPlaystyle: "Poke", releaseYear: 2016, img: "images/Torbjorn.png" },
		{ name: "Tracer", role: "DPS", species: "Human", gender: "Female", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Tracer.png" },
		{ name: "Venture", role: "DPS", species: "Human", gender: "Other", compPlaystyle: "Dive", releaseYear: 2024, img: "images/Venture.png" },
		{ name: "Widowmaker", role: "DPS", species: "Cyborg", gender: "Female", compPlaystyle: "Poke", releaseYear: 2016, img: "images/Widowmaker.png" },
		{ name: "Winston", role: "Tank", species: "Animal", gender: "Male", compPlaystyle: "Dive", releaseYear: 2016, img: "images/Winston.png" },
		{ name: "Wrecking Ball", role: "Tank", species: "Animal", gender: "Male", compPlaystyle: "Dive", releaseYear: 2018, img:"images/Wrecking_Ball.png" },
		{ name: "Zarya", role: "Tank", species: "Human", gender: "Female", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Zarya.png" },
		{ name: "Zenyatta", role: "Support", species: "Omnic", gender: "Male", compPlaystyle: "Brawl", releaseYear: 2016, img: "images/Zenyatta.png" }
    ];

    let selectedHero = pickRandomHero();
    let count = 0;
	let traitTest = 0;
    console.log(selectedHero);

    // Function to pick a random hero from the list
    function pickRandomHero() {
      return heroes[Math.floor(Math.random() * heroes.length)];
    }

    // Check the user's guess
    function checkGuess() {
      count++;
      const guessInput = document.getElementById("guess").value.trim();
      const guessHistoryContainer = document.getElementById("guess-history");

      const guessedHero = heroes.find(hero => hero.name.toLowerCase() === guessInput.toLowerCase());

      const guessEntry = document.createElement("div");
      guessEntry.classList.add("guess-entry");
      let test = 0;

      if (!guessedHero) {
        guessEntry.textContent = `Invalid hero name - Please try again`;
      } else if (guessedHero.name.toLowerCase() === selectedHero.name.toLowerCase()) {
        guessEntry.textContent = `Correct! The hero is ${selectedHero.name}. `;
		document.getElementById("guess").disabled = "true";
        if (count === 1){
          guessEntry.textContent += ` It took ${count} guess`;
        } else{
          guessEntry.textContent += ` It took ${count} guesses`;
        }
        guessEntry.style.color = "#218ffe";
      } else {
        let feedback = `${guessedHero.name}'s Matching Traits:`;
        if (guessedHero.species === selectedHero.species) {
			feedback += ` ${guessedHero.species},`;
			traitTest++;
		}
        if (guessedHero.gender === selectedHero.gender) {
			feedback += ` ${guessedHero.gender},`;
			traitTest++;
		}
        if (guessedHero.role === selectedHero.role) {
			feedback += ` ${guessedHero.role},`;
			traitTest++;
		}
        if (guessedHero.compPlaystyle === selectedHero.compPlaystyle) {
			feedback += ` ${guessedHero.compPlaystyle},`;
			traitTest++;
		}
        if (guessedHero.releaseYear === selectedHero.releaseYear) {
			feedback += ` Release Year (${selectedHero.releaseYear}),`;
			traitTest++;
		}
		if (traitTest === 0){
			feedback += " None."
		}

        feedback = feedback.replace(/,$/, ".") || "No matching traits.";

        if (guessedHero.releaseYear < selectedHero.releaseYear) {
          feedback = feedback.replace(/.$/, " -") || "No matching traits.";
          feedback += ` The hero's release year is after ${guessedHero.releaseYear}`;
        } else if (guessedHero.releaseYear > selectedHero.releaseYear) {
          feedback = feedback.replace(/.$/, " -") || "No matching traits.";
          feedback += ` The hero's release year is before ${guessedHero.releaseYear}`;
        }

        guessEntry.textContent = feedback;

        // Append hero image
        const heroImage = document.createElement("img");
        heroImage.src = guessedHero.img;
        heroImage.alt = guessedHero.name;
        heroImage.classList.add("guess-image");
        guessEntry.prepend(heroImage);
      }

      guessHistoryContainer.appendChild(guessEntry);
      document.getElementById("guess").value = "";
      traitTest = 0;
    }

    // Play again function to reset the game
    function playAgain() {
      selectedHero = pickRandomHero();
      console.log(selectedHero);
      document.getElementById("guess-history").innerHTML = "";
	  document.getElementById("guess").removeAttribute("disabled");
      count = 0;
    }

    function handleKeyDown(event) {
      if (event.key === "Enter") {
        checkGuess();
      }
    }

	var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
	var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
	return new bootstrap.Popover(popoverTriggerEl)
	})
  </script>
</body>
</html>
